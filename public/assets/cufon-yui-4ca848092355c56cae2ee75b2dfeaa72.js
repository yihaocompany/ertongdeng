/*
 * Copyright (c) 2009 Simo Kinnunen.
 * Licensed under the MIT license.
 *
 * @version 1.03
 */

var Cufon=function(){function e(e){var t=this.face=e.face;this.glyphs=e.glyphs,this.w=e.w,this.baseSize=parseInt(t["units-per-em"],10),this.family=t["font-family"].toLowerCase(),this.weight=t["font-weight"],this.style=t["font-style"]||"normal",this.viewBox=function(){var e=t.bbox.split(/\s+/),n={minX:parseInt(e[0],10),minY:parseInt(e[1],10),maxX:parseInt(e[2],10),maxY:parseInt(e[3],10)};return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")},n}(),this.ascent=-parseInt(t.ascent,10),this.descent=-parseInt(t.descent,10),this.height=-this.ascent+this.descent}function t(){var e={},t={oblique:"italic",italic:"oblique"};this.add=function(t){(e[t.style]||(e[t.style]={}))[t.weight]=t},this.get=function(n,r){var i=e[n]||e[t[n]]||e.normal||e.italic||e.oblique;if(!i)return null;if(r={normal:400,bold:700}[r]||parseInt(r,10),i[r])return i[r];var o,a,s={1:1,99:0}[r%100],u=[];void 0===s&&(s=r>400),500==r&&(r=400);for(var l in i)f(i,l)&&(l=parseInt(l,10),(!o||o>l)&&(o=l),(!a||l>a)&&(a=l),u.push(l));return o>r&&(r=o),r>a&&(r=a),u.sort(function(e,t){return(s?e>r&&t>r?t>e:e>t:r>e&&r>t?e>t:t>e)?-1:1}),i[u[0]]}}function n(){function e(e,t){return e.contains?e.contains(t):16&e.compareDocumentPosition(t)}function t(t){var n=t.relatedTarget;n&&!e(this,n)&&r(this)}function n(){r(this)}function r(e){setTimeout(function(){m.replace(e,x.get(e).options,!0)},10)}this.attach=function(e){void 0===e.onmouseenter?(a(e,"mouseover",t),a(e,"mouseout",t)):(a(e,"mouseenter",n),a(e,"mouseleave",n))}}function r(){function e(e){for(var r,i=[],o=0;r=e[o];++o)i[o]=t[n[r]];return i}var t=[],n={};this.add=function(e,r){n[e]=t.push(r)-1},this.repeat=function(){for(var n,r=arguments.length?e(arguments):t,i=0;n=r[i++];)m.replace(n[0],n[1],!0)}}function i(){function e(e){return e.cufid||(e.cufid=++n)}var t={},n=0;this.get=function(n){var r=e(n);return t[r]||(t[r]={})}}function o(e){var t={},n={};this.extend=function(e){for(var n in e)f(e,n)&&(t[n]=e[n]);return this},this.get=function(n){return void 0!=t[n]?t[n]:e[n]},this.getSize=function(e,t){return n[e]||(n[e]=new v.Size(this.get(e),t))},this.isUsable=function(){return!!e}}function a(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,function(){return n.call(e,window.event)})}function s(e,t){var n=x.get(e);return n.options?e:(t.hover&&t.hoverables[e.nodeName.toLowerCase()]&&b.attach(e),n.options=t,e)}function u(e){var t={};return function(n){return f(t,n)||(t[n]=e.apply(null,arguments)),t[n]}}function l(e,t){for(var n,r=v.quotedList(t.get("fontFamily").toLowerCase()),i=0;n=r[i];++i)if(S[n])return S[n].get(t.get("fontStyle"),t.get("fontWeight"));return null}function c(e){return document.getElementsByTagName(e)}function f(e,t){return e.hasOwnProperty(t)}function d(){for(var e,t,n={},r=0,i=arguments.length;e=arguments[r],i>r;++r)for(t in e)f(e,t)&&(n[t]=e[t]);return n}function p(e,t,n,r,i,o){var a,s=document.createDocumentFragment();if(""===t)return s;var u=r.separate,l=t.split(E[u]),c="words"==u;c&&y&&(/^\s/.test(t)&&l.unshift(""),/\s$/.test(t)&&l.push(""));for(var f=0,d=l.length;d>f;++f)a=C[r.engine](e,c?v.textAlign(l[f],n,f,d):l[f],n,r,i,o,d-1>f),a&&s.appendChild(a);return s}function h(e,t){var n,r,i,o,a=v.getStyle(s(e,t)).extend(t),u=l(e,a);for(n=e.firstChild;n;n=i)r=n.nodeType,i=n.nextSibling,3==r&&(o?(o.appendData(n.data),e.removeChild(n)):o=n,i)||(o&&(e.replaceChild(p(u,v.whiteSpace(o.data,a,o),a,t,n,e),o),o=null),1==r&&n.firstChild&&(v.hasClass(n,"cufon")?C[t.engine](u,null,a,t,n,e):arguments.callee(n,t)))}var m=function(){return m.replace.apply(null,arguments)},g=m.DOM={ready:function(){var e=!1,t={loaded:1,complete:1},n=[],r=function(){if(!e){e=!0;for(var t;t=n.shift();t());}};return document.addEventListener&&(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("pageshow",r,!1)),!window.opera&&document.readyState&&!function(){t[document.readyState]?r():setTimeout(arguments.callee,10)}(),document.readyState&&document.createStyleSheet&&!function(){try{document.body.doScroll("left"),r()}catch(e){setTimeout(arguments.callee,1)}}(),a(window,"load",r),function(t){arguments.length?e?t():n.push(t):r()}}(),root:function(){return document.documentElement||document.body}},v=m.CSS={Size:function(e,t){this.value=parseFloat(e),this.unit=String(e).match(/[a-z%]*$/)[0]||"px",this.convert=function(e){return e/t*this.value},this.convertFrom=function(e){return e/this.value*t},this.toString=function(){return this.value+this.unit}},addClass:function(e,t){var n=e.className;return e.className=n+(n&&" ")+t,e},color:u(function(e){var t={};return t.color=e.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(e,n,r){return t.opacity=parseFloat(r),"rgb("+n+")"}),t}),fontStretch:u(function(e){return"number"==typeof e?e:/%$/.test(e)?parseFloat(e)/100:{"ultra-condensed":.5,"extra-condensed":.625,condensed:.75,"semi-condensed":.875,"semi-expanded":1.125,expanded:1.25,"extra-expanded":1.5,"ultra-expanded":2}[e]||1}),getStyle:function(e){var t=document.defaultView;return t&&t.getComputedStyle?new o(t.getComputedStyle(e,null)):e.currentStyle?new o(e.currentStyle):new o(e.style)},gradient:u(function(e){for(var t,n={id:e,type:e.match(/^-([a-z]+)-gradient\(/)[1],stops:[]},r=e.substr(e.indexOf("(")).match(/([\d.]+=)?(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)/gi),i=0,o=r.length;o>i;++i)t=r[i].split("=",2).reverse(),n.stops.push([t[1]||i/(o-1),t[0]]);return n}),hasClass:function(e,t){return RegExp("(?:^|\\s)"+t+"(?=\\s|$)").test(e.className)},quotedList:u(function(e){for(var t,n=[],r=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g;t=r.exec(e);)n.push(t[3]||t[1]);return n}),recognizesMedia:u(function(e){var t,n,r,i=document.createElement("style");i.type="text/css",i.media=e;try{i.appendChild(document.createTextNode("/**/"))}catch(o){}return n=c("head")[0],n.insertBefore(i,n.firstChild),t=i.sheet||i.styleSheet,r=t&&!t.disabled,n.removeChild(i),r}),removeClass:function(e,t){var n=RegExp("(?:^|\\s+)"+t+"(?=\\s|$)","g");return e.className=e.className.replace(n,""),e},supports:function(e,t){var n=document.createElement("span").style;return void 0===n[e]?!1:(n[e]=t,n[e]===t)},textAlign:function(e,t,n,r){return"right"==t.get("textAlign")?n>0&&(e=" "+e):r-1>n&&(e+=" "),e},textDecoration:function(e,t){t||(t=this.getStyle(e));for(var n={underline:null,overline:null,"line-through":null},r=e;r.parentNode&&1==r.parentNode.nodeType;){var i=!0;for(var o in n)f(n,o)&&!n[o]&&(-1!=t.get("textDecoration").indexOf(o)&&(n[o]=t.get("color")),i=!1);if(i)break;t=this.getStyle(r=r.parentNode)}return n},textShadow:u(function(e){if("none"==e)return null;for(var t,n=[],r={},i=0,o=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/gi;t=o.exec(e);)","==t[0]?(n.push(r),r={},i=0):t[1]?r.color=t[1]:r[["offX","offY","blur"][i++]]=t[2];return n.push(r),n}),textTransform:function(){var e={uppercase:function(e){return e.toUpperCase()},lowercase:function(e){return e.toLowerCase()},capitalize:function(e){return e.replace(/\b./g,function(e){return e.toUpperCase()})}};return function(t,n){var r=e[n.get("textTransform")];return r?r(t):t}}(),whiteSpace:function(){var e={inline:1,"inline-block":1,"run-in":1};return function(t,n,r){return e[n.get("display")]?t:(r.previousSibling||(t=t.replace(/^\s+/,"")),r.nextSibling||(t=t.replace(/\s+$/,"")),t)}}()};v.ready=function(){function e(e){return e.disabled||t(e.sheet,e.media||"screen")}function t(e,n){if(!v.recognizesMedia(n||"all"))return!0;if(!e||e.disabled)return!1;try{var r,i=e.cssRules;if(i)e:for(var o=0,a=i.length;r=i[o],a>o;++o)switch(r.type){case 2:break;case 3:if(!t(r.styleSheet,r.media.mediaText))return!1;break;default:break e}}catch(s){}return!0}function n(){if(document.createStyleSheet)return!0;var t,n;for(n=0;t=s[n];++n)if("stylesheet"==t.rel.toLowerCase()&&!e(t))return!1;for(n=0;t=u[n];++n)if(!e(t))return!1;return!0}var r=!v.recognizesMedia("all"),i=!1,o=[],a=function(){r=!0;for(var e;e=o.shift();e());},s=c("link"),u=c("style");return g.ready(function(){i||(i=v.getStyle(document.body).isUsable()),r||i&&n()?a():setTimeout(arguments.callee,10)}),function(e){r?e():o.push(e)}}();var y=0==" ".split(/\s+/).length,x=new i,b=new n,w=new r,T=!1,C={},S={},N={enableTextDecoration:!1,engine:null,forceHitArea:!1,hover:!1,hoverables:{a:!0},printable:!0,selector:window.Sizzle||window.jQuery&&function(e){return jQuery(e)}||window.dojo&&dojo.query||window.Ext&&Ext.query||window.$$&&function(e){return $$(e)}||window.$&&function(e){return $(e)}||document.querySelectorAll&&function(e){return document.querySelectorAll(e)}||c,separate:"words",textShadow:"none"},E={words:/[^\S\u00a0]+/,characters:"",none:/^/};return m.now=function(){return g.ready(),m},m.refresh=function(){return w.repeat.apply(w,arguments),m},m.registerEngine=function(e,t){return t?(C[e]=t,m.set("engine",e)):m},m.registerFont=function(n){var r=new e(n),i=r.family;return S[i]||(S[i]=new t),S[i].add(r),m.set("fontFamily",'"'+i+'"')},m.replace=function(e,t,n){return t=d(N,t),t.engine?(T||(v.addClass(g.root(),"cufon-active cufon-loading"),v.ready(function(){v.addClass(v.removeClass(g.root(),"cufon-loading"),"cufon-ready")}),T=!0),t.hover&&(t.forceHitArea=!0),"string"==typeof t.textShadow&&(t.textShadow=v.textShadow(t.textShadow)),"string"==typeof t.color&&/^-/.test(t.color)&&(t.textGradient=v.gradient(t.color)),n||w.add(e,arguments),(e.nodeType||"string"==typeof e)&&(e=[e]),v.ready(function(){for(var n=0,r=e.length;r>n;++n){var i=e[n];"string"==typeof i?m.replace(t.selector(i),t,!0):h(i,t)}}),m):m},m.set=function(e,t){return N[e]=t,m},m}();Cufon.registerEngine("canvas",function(){function e(e,t){var n,r=0,i=0,o=[],a=/([mrvxe])([^a-z]*)/g;e:for(var s=0;n=a.exec(e);++s){var u=n[2].split(",");switch(n[1]){case"v":o[s]={m:"bezierCurveTo",a:[r+~~u[0],i+~~u[1],r+~~u[2],i+~~u[3],r+=~~u[4],i+=~~u[5]]};break;case"r":o[s]={m:"lineTo",a:[r+=~~u[0],i+=~~u[1]]};break;case"m":o[s]={m:"moveTo",a:[r=~~u[0],i=~~u[1]]};break;case"x":o[s]={m:"closePath"};break;case"e":break e}t[o[s].m].apply(t,o[s].a)}return o}function t(e,t){for(var n=0,r=e.length;r>n;++n){var i=e[n];t[i.m].apply(t,i.a)}}var n=document.createElement("canvas");if(n&&n.getContext&&n.getContext.apply){n=null;var r=Cufon.CSS.supports("display","inline-block"),i=!r&&("BackCompat"==document.compatMode||/frameset|transitional/i.test(document.doctype.publicId)),o=document.createElement("style");return o.type="text/css",o.appendChild(document.createTextNode((".cufon-canvas{text-indent:0;}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle;"+(i?"":"font-size:1px;line-height:1px;")+"}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden;text-indent:-10000in;}"+(r?".cufon-canvas canvas{position:relative;}":".cufon-canvas canvas{position:absolute;}")+"}@media print{.cufon-canvas{padding:0;}.cufon-canvas canvas{display:none;}.cufon-canvas .cufon-alt{display:inline;}}").replace(/;/g,"!important;"))),document.getElementsByTagName("head")[0].appendChild(o),function(n,i,o,a,s,u){function l(e,t){G.strokeStyle=t,G.beginPath(),G.moveTo(0,e),G.lineTo(L,e),G.stroke()}function c(){G.scale(R,1);for(var r=0,i=0,o=M.length;o>r;++r){var a=D[M[r]]||n.missingGlyph;a&&(a.d&&(G.beginPath(),a.code?t(a.code,G):a.code=e("m"+a.d,G),G.fill()),G.translate(H[i++],0))}G.restore()}var f=null===i;f&&(i=s.alt);var d=n.viewBox,p=o.getSize("fontSize",n.baseSize),h=o.get("letterSpacing");h="normal"==h?0:p.convertFrom(parseInt(h,10));var m=0,g=0,v=0,y=0,x=a.textShadow,b=[];if(x)for(var w=x.length;w--;){var T=x[w],C=p.convertFrom(parseFloat(T.offX)),S=p.convertFrom(parseFloat(T.offY));b[w]=[C,S],m>S&&(m=S),C>g&&(g=C),S>v&&(v=S),y>C&&(y=C)}for(var N,E,k,j,A,M=Cufon.CSS.textTransform(i,o).split(""),D=n.glyphs,L=0,H=[],w=0,F=0,O=M.length;O>w;++w)E=D[N=M[w]]||n.missingGlyph,E&&(k&&(L-=j=k[N]||0,H[F-1]-=j),L+=A=H[F++]=~~(E.w||n.w)+h,k=E.k);if(void 0===A)return null;g+=d.width-A,y+=d.minX;var q,_;if(f)q=s,_=s.firstChild;else if(q=document.createElement("span"),q.className="cufon cufon-canvas",q.alt=i,_=document.createElement("canvas"),q.appendChild(_),a.printable){var B=document.createElement("span");B.className="cufon-alt",B.appendChild(document.createTextNode(i)),q.appendChild(B)}var I=q.style,P=_.style,$=p.convert(d.height),z=Math.ceil($),W=z/$,R=W*Cufon.CSS.fontStretch(o.get("fontStretch")),X=L*R,Q=Math.ceil(p.convert(X+g-y)),Y=Math.ceil(p.convert(d.height-m+v));_.width=Q,_.height=Y,P.width=Q+"px",P.height=Y+"px",m+=d.minY,P.top=Math.round(p.convert(m-n.ascent))+"px",P.left=Math.round(p.convert(y))+"px";var U=Math.ceil(p.convert(X))+"px";r?(I.width=U,I.height=p.convert(n.height)+"px"):(I.paddingLeft=U,I.paddingBottom=p.convert(n.height)-1+"px");var G=_.getContext("2d"),V=$/d.height;G.scale(V,V*W),G.translate(-y,-m),G.lineWidth=n.face["underline-thickness"],G.save();var J=a.enableTextDecoration?Cufon.CSS.textDecoration(u,o):{};if(J.underline&&l(-n.face["underline-position"],J.underline),J.overline&&l(n.ascent,J.overline),x)for(var w=x.length;w--;){var T=x[w];G.save(),G.fillStyle=T.color,G.translate.apply(G,b[w]),c()}var K=a.textGradient;if(K){for(var Z=K.stops,et=G.createLinearGradient(0,d.minY,0,d.maxY),w=0,O=Z.length;O>w;++w)et.addColorStop.apply(et,Z[w]);G.fillStyle=et}else G.fillStyle=o.get("color");return c(),J["line-through"]&&l(-n.descent,J["line-through"]),q}}}()),Cufon.registerEngine("vml",function(){function e(e,n){return t(e,/(?:em|ex|%)$|^[a-z-]+$/i.test(n)?"1em":n)}function t(e,t){if(/px$/i.test(t))return parseFloat(t);var n=e.style.left,r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=t.replace("%","em");var i=e.style.pixelLeft;return e.style.left=n,e.runtimeStyle.left=r,i}function n(e){var t=e.id;if(!a[t]){var n=e.stops,r=document.createElement("cvml:fill"),i=[];r.type="gradient",r.angle=180,r.focus="0",r.method="sigma",r.color=n[0][1];for(var o=1,s=n.length-1;s>o;++o)i.push(100*n[o][0]+"% "+n[o][1]);r.colors=i.join(","),r.color2=n[s][1],a[t]=r}return a[t]}var r=document.namespaces;if(r){r.add("cvml","urn:schemas-microsoft-com:vml"),r=null;var i=document.createElement("cvml:shape");if(i.style.behavior="url(#default#VML)",i.coordsize){i=null;var o=(document.documentMode||0)<8;document.write(('<style type="text/css">.cufon-vml-canvas{text-indent:0;}@media screen{cvml\\:shape,cvml\\:rect,cvml\\:fill,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute;}.cufon-vml-canvas{position:absolute;text-align:left;}.cufon-vml{display:inline-block;position:relative;vertical-align:'+(o?"middle":"text-bottom")+";}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px;}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none;}.cufon-vml .cufon-alt{display:inline;}}</style>").replace(/;/g,"!important;"));var a={};return function(r,i,a,s,u,l,c){var f=null===i;f&&(i=u.alt);var d=r.viewBox,p=a.computedFontSize||(a.computedFontSize=new Cufon.CSS.Size(e(l,a.get("fontSize"))+"px",r.baseSize)),h=a.computedLSpacing;void 0==h&&(h=a.get("letterSpacing"),a.computedLSpacing=h="normal"==h?0:~~p.convertFrom(t(l,h)));var m,g;if(f)m=u,g=u.firstChild;else{if(m=document.createElement("span"),m.className="cufon cufon-vml",m.alt=i,g=document.createElement("span"),g.className="cufon-vml-canvas",m.appendChild(g),s.printable){var v=document.createElement("span");v.className="cufon-alt",v.appendChild(document.createTextNode(i)),m.appendChild(v)}c||m.appendChild(document.createElement("cvml:shape"))}var y=m.style,x=g.style,b=p.convert(d.height),w=Math.ceil(b),T=w/b,C=T*Cufon.CSS.fontStretch(a.get("fontStretch")),S=d.minX,N=d.minY;x.height=w,x.top=Math.round(p.convert(N-r.ascent)),x.left=Math.round(p.convert(S)),y.height=p.convert(r.height)+"px",s.enableTextDecoration?Cufon.CSS.textDecoration(l,a):{};for(var E,k,j,A,M,D,L=a.get("color"),H=Cufon.CSS.textTransform(i,a).split(""),F=r.glyphs,O=0,q=[],_=0,B=s.textShadow,I=0,P=0,$=H.length;$>I;++I)k=F[E=H[I]]||r.missingGlyph,k&&(j&&(O-=A=j[E]||0,q[P-1]-=A),O+=M=q[P++]=~~(k.w||r.w)+h,j=k.k);if(void 0===M)return null;var z,W=-S+O+(d.width-M),R=p.convert(W*C),X=Math.round(R),Q=W+","+d.height,Y="r"+Q+"ns",U=s.textGradient&&n(s.textGradient);for(I=0,P=0;$>I;++I)if(k=F[H[I]]||r.missingGlyph){if(f)for(D=g.childNodes[P];D.firstChild;)D.removeChild(D.firstChild);else D=document.createElement("cvml:shape"),g.appendChild(D);D.stroked="f",D.coordsize=Q,D.coordorigin=z=S-_+","+N,D.path=(k.d?"m"+k.d+"xe":"")+"m"+z+Y,D.fillcolor=L,U&&D.appendChild(U.cloneNode(!1));var G=D.style;if(G.width=X,G.height=w,B){var V,J=B[0],K=B[1],Z=Cufon.CSS.color(J.color),et=document.createElement("cvml:shadow");et.on="t",et.color=Z.color,et.offset=J.offX+","+J.offY,K&&(V=Cufon.CSS.color(K.color),et.type="double",et.color2=V.color,et.offset2=K.offX+","+K.offY),et.opacity=Z.opacity||V&&V.opacity||1,D.appendChild(et)}_+=q[P++]}var tt,nt,rt=D.nextSibling;if(s.forceHitArea?(rt||(rt=document.createElement("cvml:rect"),rt.stroked="f",rt.className="cufon-vml-cover",tt=document.createElement("cvml:fill"),tt.opacity=0,rt.appendChild(tt),g.appendChild(rt)),nt=rt.style,nt.width=X,nt.height=w):rt&&g.removeChild(rt),y.width=Math.max(Math.ceil(p.convert(O*C)),0),o){var it=a.computedYAdjust;if(void 0===it){var ot=a.get("lineHeight");"normal"==ot?ot="1em":isNaN(ot)||(ot+="em"),a.computedYAdjust=it=.5*(t(l,ot)-parseFloat(y.height))}it&&(y.marginTop=Math.ceil(it)+"px",y.marginBottom=it+"px")}return m}}}}());
